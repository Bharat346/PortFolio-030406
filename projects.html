<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Projects</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="style2.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css"
      integrity="sha384-nU14brUcp6StFntEOOEBvcJm4huWjB0OcIeQ3fltAfSmuZFrkAif0T+UtNGlKKQv"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
    />
  </head>
  <style>
    .custom-card-scan-btn {
    background-color: #4caf50; /* Background color */
    display: flex;
    justify-content: space-around;
    color: white; /* Text color */
    padding: 10px 20px; /* Padding */
    border: none; /* Remove border */
    border-radius: 5px; /* Add border radius */
    cursor: pointer; /* Change cursor to pointer on hover */
    transition: background-color 0.3s; /* Add transition effect */
  }
  
  .custom-card-scan-btn:hover {
    background-color: #45a049; /* Darker background color on hover */
  }
    #popup {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 99999999;
      display: flex;
      justify-content: center;
      align-items: center;
      display: none;
    }

    #qr-code-container {
      position: relative;
      width: 300px;
      height: 333px;
      background: linear-gradient(
        to bottom right,
        #a74eff,
        #fc913a,
        #f9d423,
        #ede574,
        #e1f5c4
      ); /* Gradient background */
      border-radius: 10px;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    #qr-code {
      width: 100%;
      height: 80%;
    }

    #scan-me-text {
      position: absolute;
      top: 0px;
      left: 50%;
      transform: translateX(-50%);
      color: #fff;
      font-size: 20px;
      /* text-align: center; */
      /* display: flex; */
      /* justify-content: space-around; */
    }

    .popup-content {
      /* display: none; */
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
      max-width: 90%;
      max-height: 90%;
      overflow: auto;
    }

    .show {
      display: block;
    }

    .close-button {
      z-index: 10;
      font-size: 20px;
      position: absolute;
      top: 7%;
      right: 5%;
    }
  </style>
  <body>
    <header>
      <div class="nav">
        <button class="icon-button" id="icon-button-menu">
          <span class="material-symbols-outlined">menu</span>
        </button>
        <button class="icon-button" id="icon-button-notification">
          <span class="material-symbols-outlined">notifications</span>
        </button>
      </div>
      <div class="div_top">
        <img
          width="150px"
          height="150px"
          style="
            border-radius: 100px;
            border-left: 5px solid rgb(60, 0, 255);
            border-right: 5px solid rgb(60, 0, 255);
            transform: translateY(20%);
          "
          src="me.jpg"
          alt="Bharat Kumar"
        />
        <h1 style="transform: translateY(70%); color: rgb(235, 80, 8)">
          Bharat Kumar
        </h1>
      </div>
      <div class="offcanvas-menu" id="offcanvas">
        <div>
          <button class="close-button" id="close-button">
            <span class="material-symbols-outlined">close</span>
          </button>
        </div>
        <div class="menuBtn">
          <hr />
          <div class="menuBtn">
            <hr />
            <div
              class="menuOption"
              onclick="window.location.href = 'index.html'"
              style="border: 3px solid #333; border-radius: 100px"
            >
              <span class="material-symbols-outlined">home</span
              ><button>Home</button>
            </div>
            <hr />
            <div
              class="menuOption"
              onclick="window.location.href = 'projects.html'"
              style="border: 3px solid #333; border-radius: 100px"
            >
              <span class="material-symbols-outlined">select_window</span
              ><button>Projects</button>
            </div>
            <hr />
            <div
              class="menuOption"
              onclick="window.location.href = 'notes.html'"
              style="border: 3px solid #333; border-radius: 100px"
            >
              <span class="material-symbols-outlined">layers</span
              ><button onclick="window.location.href='notes'">Notes</button>
            </div>
            <hr />
            <div
              class="menuOption"
              onclick="window.location.href = 'contact.html'"
              style="border: 3px solid #333; border-radius: 100px"
            >
              <span class="material-symbols-outlined">contacts</span
              ><button onclick="window.location.href='contacts'">
                Contact
              </button>
            </div>
            <hr />
          </div>
          <hr />
        </div>
      </div>
      <div class="offcanvas-menu2" id="offcanvas2">
        <div>
          <button class="close-button" id="close-button2">
            <span class="material-symbols-outlined">close</span>
          </button>
        </div>
        <br />
        <br />
        <h2 style="transform: translateY(10%)">Important Notification</h2>
        <hr />
        <div id="news_in"></div>
      </div>
    </header>
    <main>
      <hr />
      <div class="category" id="category">
        <div class="elem all">All</div>
        <div class="elem c">C</div>
        <div class="elem js">JavaScript</div>
        <div class="elem py">Python</div>
      </div>
      <hr />
      <div class="projects" id="projects"></div>
      <button class="up_btn" onclick="window.location.href = '#'">
        <span class="material-symbols-outlined">expand_less</span>
      </button>
      <!-- Cookie Popup -->
      <div id="cookie-popup" class="cookie-popup">
        <div class="cookie-content">
          <img
            style="background-color: white"
            src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQgn745eHls2unkSrn5KX4qfg-C7nI7kGpfSg&usqp=CAU"
            alt="Cookie"
            class="cookie-image"
          />
          <p>
            This website uses cookies to ensure you get the best experience on
            our website.
          </p>
          <div class="button-container">
            <button id="accept-cookie" class="accept-button">Accept</button>
            <button id="decline-cookie" class="decline-button">Decline</button>
          </div>
        </div>
      </div>

      <!-- qr code  -->
      <div class="popup" id="popup">
        <div class="popup-content">
          <button class="close-button" onclick="closePopup()">
            <span class="material-symbols-outlined">close</span>
          </button>
          <div id="qr-code-container">
            <div id="scan-me-text">Scan Me</div>
            <div id="qr-code"></div>
          </div>
        </div>
      </div>
    </main>

    <script src="script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
    <script>
      // Function to handle QR Code scanning
      function togglePopup(code, projectId) {
        let popup = document.getElementById("popup");
        let qrCodeContainer = document.getElementById("qr-code");

        // Clear previous QR code if any
        qrCodeContainer.innerHTML = "";

        // Generate QR code for the provided code
        let qrCode = new QRCode(qrCodeContainer, {
          text: code,
          width: 300,
          height: 300,
          colorDark: "#000",
          colorLight: "#fff",
          correctLevel: QRCode.CorrectLevel.H,
        });

        // Set a data attribute on the popup to identify the project
        popup.setAttribute("data-project-id", projectId);

        popup.style.display = "block";
      }

      function closePopup() {
        let popup = document.getElementById("popup");
        popup.style.display = "none";
      }

      document.addEventListener("DOMContentLoaded", () => {
        // Fetch projects once when the page loads
        fetchProjects();
        function fetchProjects() {
          fetch("projects.json")
            .then((res) => res.json())
            .then((projects) => {
              // Add click event listeners to category elements
              const nav = document.querySelector(".category");
              renderProjects(projects);
              Array.from(nav.querySelectorAll(".elem")).forEach((e) => {
                e.addEventListener("click", () => {
                  // Filter projects based on clicked element
                  const text = e.textContent.toLowerCase();
                  const filteredProjects = projects.filter((project) =>
                    text === "all" ? true : project.lan.toLowerCase() === text
                  );

                  // Render filtered projects
                  renderProjects(filteredProjects);

                  // Update border styles
                  updateBorderStyles(e);
                });
              });
            });
        }

        function renderProjects(projects) {
          const projectsContainer = document.getElementById("projects");
          projectsContainer.innerHTML = ""; // Clear existing projects

          projects.forEach((project) => {
            Add_Card(
              project.Tittle,
              project.code,
              project.project_view,
              project.img,
              project.Description,
              project.id
            );
          });
        }

        function updateBorderStyles(clickedElement) {
          const all = document.querySelector(".all");
          const categoryElements = document.querySelectorAll(".elem");

          // Remove border from all category elements
          categoryElements.forEach((element) => {
            element.style.borderBottom = "0px solid rgb(17, 0, 255)";
            element.style.borderRadius = "0px";
          });

          // Add border to the clicked element
          clickedElement.style.borderBottom = "5px solid rgb(17, 0, 255)";
          clickedElement.style.borderRadius = "5px";
        }

        function Add_Card(title, code, display, img, description, projectId) {
          const projectsContainer = document.getElementById("projects");
          const div = document.createElement("div");
          div.classList.add("custom-card");
          div.innerHTML = `
        <div class="custom-card-image">
            <img src=${img} alt=${title}>
        </div>
        <div class="custom-card-content">
            <h3 class="custom-card-title">${title}</h3>
            <p class="custom-card-text">${description}</p>
            <a href=${display} class="custom-card-btn">View Project</a>
            <a href=${code} class="custom-card-btn">View Project code</a>
            <button class="custom-card-scan-btn" onclick="togglePopup('${display}', '${projectId}')">
                <span class="material-symbols-outlined">qr_code_scanner</span> Scan QR Code
            </button>
        </div>
    `;
          projectsContainer.appendChild(div);
        }
      });
    </script>
  </body>
</html>
